import{a as C}from"./axios.3a665b0f.js";import{_ as N,r as _,h as c,a as r,o as w,c as k,b as t,w as l,e as f,i as b,E as g}from"./index.46c576b9.js";const q={class:"create-card"},B={__name:"CreateCard",setup(D){const u=_(null),m=_(!1),a=c({studentId:"",studentName:"",balance:0}),v=c({studentId:[{required:!0,message:"请输入学生ID",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],studentName:[{required:!0,message:"请输入学生姓名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],balance:[{required:!0,message:"请输入初始余额",trigger:"blur"}]}),y=async s=>{s&&await s.validate(async e=>{if(e)try{m.value=!0;const o=await C.post("http://127.0.0.1:8080/api/v1/cards",{studentId:a.studentId,studentName:a.studentName,balance:a.balance});g({message:"校园卡创建成功",type:"success"}),i(s)}catch(o){g({message:o.message||"校园卡创建失败",type:"error"})}finally{m.value=!1}})},i=s=>{s&&s.resetFields()};return(s,e)=>{const o=r("el-input"),d=r("el-form-item"),V=r("el-input-number"),p=r("el-button"),I=r("el-form"),x=r("el-card");return w(),k("div",q,[t(x,{class:"card-container"},{header:l(()=>e[5]||(e[5]=[f("div",{class:"card-header"},[f("h3",null,"创建校园卡")],-1)])),default:l(()=>[t(I,{ref_key:"formRef",ref:u,model:a,rules:v,"label-width":"120px","label-position":"right","status-icon":""},{default:l(()=>[t(d,{label:"学生ID",prop:"studentId"},{default:l(()=>[t(o,{modelValue:a.studentId,"onUpdate:modelValue":e[0]||(e[0]=n=>a.studentId=n),placeholder:"请输入学生ID"},null,8,["modelValue"])]),_:1}),t(d,{label:"学生姓名",prop:"studentName"},{default:l(()=>[t(o,{modelValue:a.studentName,"onUpdate:modelValue":e[1]||(e[1]=n=>a.studentName=n),placeholder:"请输入学生姓名"},null,8,["modelValue"])]),_:1}),t(d,{label:"初始余额",prop:"balance"},{default:l(()=>[t(V,{modelValue:a.balance,"onUpdate:modelValue":e[2]||(e[2]=n=>a.balance=n),min:0,precision:2,step:10,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(d,null,{default:l(()=>[t(p,{type:"primary",onClick:e[3]||(e[3]=n=>y(u.value)),loading:m.value},{default:l(()=>e[6]||(e[6]=[b("创建")])),_:1,__:[6]},8,["loading"]),t(p,{onClick:e[4]||(e[4]=n=>i(u.value))},{default:l(()=>e[7]||(e[7]=[b("重置")])),_:1,__:[7]})]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}},$=N(B,[["__scopeId","data-v-909e2ab2"]]);export{$ as default};
