import{c as N}from"./card.787f49f5.js";import{_ as x,r as c,h as _,a as r,o as w,c as k,b as t,w as l,e as f,i as g,E as b}from"./index.29217557.js";const q={class:"create-card"},B={__name:"CreateCard",setup(D){const u=c(null),m=c(!1),a=_({studentId:"",studentName:"",balance:0}),v=_({studentId:[{required:!0,message:"请输入学生ID",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],studentName:[{required:!0,message:"请输入学生姓名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],balance:[{required:!0,message:"请输入初始余额",trigger:"blur"}]}),y=async s=>{s&&await s.validate(async e=>{if(e)try{m.value=!0;const o=await N.createCard({studentId:a.studentId,studentName:a.studentName,balance:a.balance});b({message:"校园卡创建成功",type:"success"}),i(s)}catch(o){b({message:o.message||"校园卡创建失败",type:"error"})}finally{m.value=!1}})},i=s=>{s&&s.resetFields()};return(s,e)=>{const o=r("el-input"),d=r("el-form-item"),V=r("el-input-number"),p=r("el-button"),C=r("el-form"),I=r("el-card");return w(),k("div",q,[t(I,{class:"card-container"},{header:l(()=>e[5]||(e[5]=[f("div",{class:"card-header"},[f("h3",null,"创建校园卡")],-1)])),default:l(()=>[t(C,{ref_key:"formRef",ref:u,model:a,rules:v,"label-width":"120px","label-position":"right","status-icon":""},{default:l(()=>[t(d,{label:"学生ID",prop:"studentId"},{default:l(()=>[t(o,{modelValue:a.studentId,"onUpdate:modelValue":e[0]||(e[0]=n=>a.studentId=n),placeholder:"请输入学生ID"},null,8,["modelValue"])]),_:1}),t(d,{label:"学生姓名",prop:"studentName"},{default:l(()=>[t(o,{modelValue:a.studentName,"onUpdate:modelValue":e[1]||(e[1]=n=>a.studentName=n),placeholder:"请输入学生姓名"},null,8,["modelValue"])]),_:1}),t(d,{label:"初始余额",prop:"balance"},{default:l(()=>[t(V,{modelValue:a.balance,"onUpdate:modelValue":e[2]||(e[2]=n=>a.balance=n),min:0,precision:2,step:10,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(d,null,{default:l(()=>[t(p,{type:"primary",onClick:e[3]||(e[3]=n=>y(u.value)),loading:m.value},{default:l(()=>e[6]||(e[6]=[g("创建")])),_:1,__:[6]},8,["loading"]),t(p,{onClick:e[4]||(e[4]=n=>i(u.value))},{default:l(()=>e[7]||(e[7]=[g("重置")])),_:1,__:[7]})]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}},R=x(B,[["__scopeId","data-v-c3ca8da6"]]);export{R as default};
